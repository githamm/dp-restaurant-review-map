<!DOCTYPE html>
<html>
  <body>

		<!--

			This example uses:
				MapQuest
				titleColumn & fields to populate popup

		-->
		
    <div id="map" style="height: 500px; width: 600px"></div>

    <script type="text/javascript" src="common/tabletop.js"></script>
    <script type="text/javascript" src="common/handlebars.js"></script>
	  <script src="http://open.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js"></script> 

    <script type="text/javascript" src="../src/mapsheet.js"></script>

    <script id="popup-template" type="text/x-handlebars-template">
			<h3><a href='{{link}}'>{{name}}</a></h3>
			<p>Est. {{established}}, {{borough}}</p>
			<p>{{streetaddress}}</p>
			<p>{{type}}</p>
    </script>

    <script type="text/javascript">
    	window.onload = function() { init() };

      var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?key=0AtG9_k99Q_n6dE54Vl83elpDNm9CQmxQRW5KTVZqWUE&output=html';
			
      function init() {
        Mapsheet( { key: public_spreadsheet_url,
											element: "map",
											provider: Mapsheet.Providers.MapQuest,
											titleColumn: 'town',
											fields: [ 'Town', 'Street Address' ],
											click: function(e, point) {
											  alert('You clicked ' + point.model['town']);
											}
									} );
      }

      document.write("The published spreadsheet is located at <a target='_new' href='" + public_spreadsheet_url + "'>" + public_spreadsheet_url + "</a>");        
    </script>
  </body>
</html>
